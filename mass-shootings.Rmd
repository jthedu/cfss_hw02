---
title: "HW2: Exploring Mass Shootings in America"
author: "Julia Du"
output: github_document
---

## Get the data

```{r, echo = TRUE}
library(tidyverse)    # load tidyverse packages, including ggplot2
library(knitr)        # load functions for formatting tables

# get data from rcfss package
# install latest version if not already installed
# devtools::install_github("uc-cfss/rcfss")
library(rcfss)

# load the data
data("mass_shootings")
mass_shootings
```

## Generate a data frame that summarizes the number of mass shootings per year. Print the data frame as a formatted `kable()` table.

```{r, echo = TRUE}
#shootings_yr = group_by(.data = mass_shootings, year)
#summarize(.data = shootings_yr, count=n())

### same as above, but with a pipe
shootings_yrpipe = mass_shootings %>%
  group_by(year) %>%
  summarize(
    count = n()
  )
kable(shootings_yrpipe, caption = "Mass shootings (1982-2019)", col.names = c("Year", "Number of mass shootings"))
```

## Generate a bar chart that identifies the number of mass shooters associated with each race category. The bars should be sorted from highest to lowest.

```{r}
### this is unnecessary. ask TAs about how i'd make a graph from this table
shooter_race = mass_shootings %>%
  group_by(race) %>%
  summarize(
    count = n() 
  ) %>%
  arrange(desc(count)) %>%
  na.omit()
  
library(forcats)
require(forcats)

ggplot(data = mass_shootings[!is.na(mass_shootings$race), ], mapping = aes(x = fct_infreq(race))) +
 geom_bar() +
  labs(title = "Mass shootings in the U.S. (1982-2019)", x = "Race of perpetrator", y = "Number of incidents")

####ask TAs about why the square brackets work, i.e. formatting of [!is.na(df$column),]

#above works. can also do
#ggplot(na.omit(mass_shootings[, c("race")]), aes(x=fct_infreq(race))) + 
 # geom_bar() +
  #labs(title = "Mass shootings in the U.S. (1982-2019)", x = "Race of perpetrator", y = "Number of incidents")

```

## Generate a boxplot visualizing the number of total victims, by type of location. Redraw the same plot, but remove the Las Vegas Strip massacre from the dataset.

```{r}
# w/ the LV Strip massacre
ggplot(data = mass_shootings, mapping = aes(x = location_type, y = total_victims)) +
 geom_boxplot() +
  labs(title = "Mass shootings in the U.S. (1982-2019)", x = "Type of location of incident", y = "Total number of victims")

#omitting LV Strip massacre
noLV = mass_shootings %>%
    filter(case != "Las Vegas Strip massacre") 

ggplot(data = noLV, mapping = aes(x = location_type, y = total_victims)) +
 geom_boxplot() +
  labs(title = "Mass shootings in the U.S. (1982-2019)", subtitle = "Omitting the Las Vegas Strip massacre", x = "Type of location of incident", y = "Total number of victims")
```

## How many white males with prior signs of mental illness initiated a mass shooting after 2000?

```{r}
#filter by race = "White", male = TRUE, prior_mental_illness = "Yes", year > 2000
mass_shootings %>%
  filter(race == "White", male == TRUE, prior_mental_illness == "Yes", year > 2000) %>% 
  mutate(white_after2000 = row_number()) %>%
  glimpse()

# 20 white males with prior signs of mental illness initiated a mass shooting after 2000.

#### ask TAs about if you ever need to put TRUE or FAlSE in quotation marks. 
#### also quotations vs backticks???
```

## Which month of the year has the most mass shootings? Generate a bar chart sorted in chronological order to provide evidence of your answer.

```{r}

```

## How does the distribution of mass shooting fatalities differ between white and black shooters? What about white and latino shooters?

```{r}

```

## Are mass shootings with shooters suffering from mental illness different from mass shootings with no signs of mental illness in the shooter? Assess the relationship between mental illness and total victims, mental illness and race, and the intersection of all three variables.

```{r}

```

## Session info

```{r, echo = TRUE}
devtools::session_info()
```


